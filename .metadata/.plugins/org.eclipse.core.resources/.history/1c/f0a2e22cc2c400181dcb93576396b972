import java.io.*;

import javax.xml.parsers.*;

import org.w3c.dom.*;

public class Main {
	static Catalogue catalogue = new Catalogue();;

	public static void main(String[] args) {
		booksShow("F:\\git\\javaprojects\\LAB1\\data\\books.xml");
	}
	
	static void booksShow(String path) {
		 File fXml=new File(path);
	        
	        try
	        {
	            DocumentBuilderFactory dbf=DocumentBuilderFactory.newInstance();
	            DocumentBuilder db=dbf.newDocumentBuilder();
	            Document doc=db.parse(fXml);
	            
	            doc.getDocumentElement().normalize();
	            System.out.println("Список книг");
	            
	            NodeList nodeLst=doc.getElementsByTagName("book");
	           	            
	            for(int je=0;je<nodeLst.getLength();je++)
	            {
	                Node fstNode=nodeLst.item(je);
	                if(fstNode.getNodeType()==Node.ELEMENT_NODE)
	                {
	                	
	                	 Element elj=(Element)fstNode;
	                	 
	                	//считывание id	                 
	                    NodeList nljx=elj.getElementsByTagName("id");
	                    Element eljx=(Element)nljx.item(0);
	                    NodeList nljxc=eljx.getChildNodes();
	                    Integer id = Integer.parseInt(""+((Node)nljxc.item(0)).getNodeValue());	                    
	                  //считывание title
	                    nljx=elj.getElementsByTagName("title");
	                    eljx=(Element)nljx.item(0);
	                    nljxc=eljx.getChildNodes();
	                    String title = ""+((Node)nljxc.item(0)).getNodeValue();
	                	//считывание author
	                    nljx=elj.getElementsByTagName("author");
	                    eljx=(Element)nljx.item(0);
	                    nljxc=eljx.getChildNodes();
	                    String author = ""+((Node)nljxc.item(0)).getNodeValue();
	                  //считывание publisher
	                    nljx=elj.getElementsByTagName("publisher");
	                    eljx=(Element)nljx.item(0);
	                    nljxc=eljx.getChildNodes();
	                    String publisher = ""+((Node)nljxc.item(0)).getNodeValue();
	                  //считывание publisher
	                    nljx=elj.getElementsByTagName("pages");
	                    eljx=(Element)nljx.item(0);
	                    nljxc=eljx.getChildNodes();
	                    Integer pages = Integer.parseInt(""+((Node)nljxc.item(0)).getNodeValue());
	                  //считывание year
	                    nljx=elj.getElementsByTagName("year");
	                    eljx=(Element)nljx.item(0);
	                    nljxc=eljx.getChildNodes();
	                    Integer year = Integer.parseInt(""+((Node)nljxc.item(0)).getNodeValue());
	                    
	                    //добавление книги в список
	                    catalogue.bookAdd(id,title, author, publisher, pages, year);
	                    System.out.println((catalogue.bookFind(id)).toString());
	                }
	            }
	        }
	        catch(Exception ei){}
	    }


	}

